<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <style>
    *{margin:0px;padding:0px;}
    .wrapper{
      width:100%;
      height:600px;  
      background:yellow;
    }
    .registSide{
      width:20%;
      height:100%;
      background:dodgerblue;  
      float:left;/*block 형인 태그 요소를 띄운다..*/
      text-align: center;
    }
    .center{
      width:60%;
      height:100%;
      background:#ccc;
      float:left;
    }
    .detailSide{
      width:20%;
      height:100%;
      background:#81e46d;
      float:left;
      text-align: center;
    }

    input[type=text]{
      width:90%;
    }
    table {
      border-collapse: collapse;
      border-spacing: 0;
      width: 100%;
      border: 1px solid #ddd;
    }

    th, td {
        text-align: left;
        padding: 16px;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2
    }    
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
  <script>
    //앱선언 
    var myApp = angular.module("myApp", []);
    myApp.run(function ($rootScope, $http) {
      $rootScope.list = [];
      $rootScope.list.push({});
      $rootScope.list.push({});
      $rootScope.list.push({});

      //회원목록 가져오기!!!
      $rootScope.getList = function () {
        //alert("목록 지금 조회할께요");

        $http({
          url: "/member/list",
          method: "get"
        }).then(function (response) {
          //alert(response.data);
          $rootScope.list=response.data;
        }, function (error_response) {
          alert(error_response.statusText);
        });
      }

      $rootScope.getList();
    });


    myApp.controller("registController", function ($rootScope, $scope, $http) {
      $scope.regist = function () {
        $http({
          url: "/member/regist",
          method: "post",
          data: JSON.stringify({
            name: $scope.name,
            email: $scope.email,
            age: $scope.age
          })
        }).then(function (response) {
          //alert(response.data);
          if(response.data.result==0){
            alert("등록실패");
          }else{
            $rootScope.getList(); 
          }
        });//ajax
      }
    });
    myApp.controller("detailController", function ($scope) {

    });

  </script>
</head>

<body>
  <div class="wrapper" ng-app="myApp">

    <div class="registSide" ng-controller="registController">
      <input type="text" placeholder="이름" ng-model="name" />
      <input type="text" placeholder="이메일" ng-model="email" />
      <input type="text" placeholder="나이" ng-model="age" />
      <button ng-click="regist()">등록</button>
    </div>
    <div class="center">

      <div style="text-align: center">
        <input type="text" />
      </div>

      <table>
        <tr>
          <th>이름</th>
          <th>이메일</th>
          <th>나이</th>
        </tr>
        <tr ng-repeat="x in list">
          <td>{{x.name}}</td>
          <td>{{x.email}}</td>
          <td>{{x.age}}</td>
        </tr>
      </table>

    </div>
    <div class="detailSide" ng-controller="detailController">
      <input type="text" placeholder="이름" />
      <input type="text" placeholder="이메일" />
      <input type="text" placeholder="나이" />
      <button>수정</button>
      <button>삭제</button>
    </div>
  </div>
</body>

</html>